{"version":3,"sources":["service/index.ts","../../packages/duely/lib/esm/window.mjs","../../packages/duely/lib/esm/service-worker.mjs","service/service.ts","service/client.ts"],"names":["mode","__WEBPACK_IMPORTED_MODULE_3__client__","__WEBPACK_IMPORTED_MODULE_2__service__","console","log","service","client","window","__WEBPACK_IMPORTED_MODULE_0_duely_window__","self","__WEBPACK_IMPORTED_MODULE_1_duely_service_worker__","__WEBPACK_IMPORTED_MODULE_0__context__","__webpack_require__","constructor","name","__webpack_exports__","startsWith","__WEBPACK_IMPORTED_MODULE_0_duely_service_worker__","[object Object]","caches","cacheKeys","keys","key","open","exception","error"],"mappings":"4IAKA,MAAMA,EAAOC,EAAA,EAAS,SAAWC,EAAA,EAAU,UAAY,WAEvDC,QAAQC,IAAI,gBAAiBJ,GAAOK,QAAAH,EAAA,EAASI,OAAAL,EAAA,IAAUM,OAAAC,EAAA,EAAQC,KAAAC,EAAA,wMCP/D,IAAAC,EAAAC,EAAA,KAEAD,EAAA,EAAAE,YAAAC,KACA,MAAAP,EAAAI,EAAA,GAAAA,EAAA,EAAAE,aAAA,WAAAF,EAAA,EAAAE,YAAAC,MAAAH,EAAA,EAAAI,EAAA,EAAAR,oCCHA,IAAAI,EAAAC,EAAA,KAEAD,EAAA,EAAAE,YAAAC,KACA,MAAAL,EAAAE,EAAA,GAAAA,EAAA,EAAAE,aAAAF,EAAA,EAAAE,YAAAC,KAAAE,WAAA,kBAAAL,EAAA,EAAAI,EAAA,EAAAN,iDCUO,MAAMJ,EAAUY,EAAA,GAAQ,UAV7BC,WAUmDH,EAAA,EAAAV,iDCP9C,MAAMC,EAASE,EAAA,GAAU,UAH9BU,cAGmDH,EAAA,EAAAT,EAErD,WACE,MAAMa,KACN,IACE,MAAMC,QAAkBX,KAAKU,OAAOE,OACpC,IAAK,MAAMC,KAAOF,EAChB,IACED,EAAOG,SAAab,KAAKU,OAAOI,KAAKD,GACrC,MAAOE,GACPL,EAAOG,GAAOE,GAGlB,MAAOA,GACPrB,QAAQsB,MAAMD,WAEdrB,QAAQC,IAAI,aAAce,KAd9B","file":"static/js/service.6aab3b65.chunk.js","sourcesContent":["import {window} from 'duely/window';\nimport {self} from 'duely/service-worker';\nimport {service} from './service';\nimport {client} from './client';\n\nconst mode = client ? 'Client' : service ? 'Service' : 'Disabled';\n\nconsole.log('[Draftout %s]', mode, {service, client}, {window, self});\n\n// localStorage['abc'] = 'abc';\n\n// {\n\n//   // const scope: WindowOrWorkerGlobalScope\n//   if (window) {\n//     // Client\n//     console.log('[Service Client]: %o', {window, self});\n//   } else if (self) {\n//     // Service Worker\n//     console.log('[Service Worker]: %o', {window, self, worker});\n\n//   }\n// }\n\n\n// declare global {\n//   var clients: Clients | undefined;\n// }\n\n\n\n// WEBPACK FOOTER //\n// ./src/service/index.ts","/// <reference lib=\"webworker\" />\nimport { context } from './context';\ncontext.constructor.name === 'ServiceWorkerGlobalScope';\nexport const window = (context && context.constructor && context.constructor.name === 'Window' && context);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../packages/duely/lib/esm/window.mjs\n// module id = 231\n// module chunks = 0","/// <reference lib=\"webworker\" />\nimport { context } from './context';\ncontext.constructor.name === 'ServiceWorkerGlobalScope';\nexport const self = (context && context.constructor && context.constructor.name.startsWith('ServiceWorker') && context);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../packages/duely/lib/esm/service-worker.mjs\n// module id = 232\n// module chunks = 0","import {self} from 'duely/service-worker';\n\nexport class DraftoutService {\n  claim() {\n\n  }\n  // async activate() {\n\n  //   // self.\n  // }\n\n}\n\nexport const service = self && new DraftoutService();\n\n\n\n// WEBPACK FOOTER //\n// ./src/service/service.ts","import {window} from 'duely/window';\n\nexport class DraftoutClient {\n  register() {}\n}\n\nexport const client = window && new DraftoutClient();\n\n(async () => {\n  const caches = {};\n  try {\n    const cacheKeys = await self.caches.keys();\n    for (const key of cacheKeys) {\n      try {\n        caches[key] = await self.caches.open(key);\n      } catch (exception) {\n        caches[key] = exception;\n      }\n    }\n  } catch (exception) {\n    console.error(exception);\n  } finally {\n    console.log('caches: %o', caches);\n  }\n})();\n\n\n\n// WEBPACK FOOTER //\n// ./src/service/client.ts"],"sourceRoot":""}